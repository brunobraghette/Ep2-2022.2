quest = [{'titulo': 'Qual o resultado da operação 57 + 32?',
          'nivel': 'facil',
          'opcoes': {'A': '-19', 'B': '85', 'C': '89', 'D': '99'},
          'correta': 'C'},

         {'titulo': 'Qual a capital do Brasil?',
          'nivel': 'facil',
          'opcoes': {'A': 'Brasília', 'B': 'Rio de janeiro', 'C': 'São Paulo', 'D': 'Osasco'},
          'correta': 'A'},

         {'titulo': 'Quando é o feriado da Independência do Brasil?',
          'nivel': 'facil',
          'opcoes': {'A': '21 de Abril', 'B': '12 de Outubro', 'C': '07 de Setembro', 'D': '15 de Novembro'},
          'correta': 'C'},

         {'titulo': '_________ é um conjunto de particularidades que caracterizam um grupo de pessoas, uma família ou uma sociedade. É formada por princípios morais, hábitos, costumes, histórias, manifestações religiosas, entre outros. Qual palavra melhor completa o início da frase?',
          'nivel': 'facil',
          'opcoes': {'A': 'Missão', 'B': 'Cultura', 'C': 'Curso superior', 'D': 'Culinária'},
          'correta': 'B'},

         {'titulo': 'Qual destes termos menos tem relação com o fenômeno da globalização?',
          'nivel': 'facil',
          'opcoes': {'A': 'Aculturação', 'B': 'Neoliberalismo', 'C': 'União Europeia', 'D': 'Caldeirão do Huck'},
          'correta': 'D'},

         {'titulo': 'Qual o feriado do aniversário da cidade de São Paulo?',
          'nivel': 'facil',
          'opcoes': {'A': '25 de Janeiro', 'B': '24 de Março', 'C': '9 de Julho', 'D': '12 de Novembro'},
          'correta': 'A'},

         {'titulo': 'Qual destas não é uma fruta?',
          'nivel': 'facil',
          'opcoes': {'A': 'Laranja', 'B': 'Maça', 'C': 'Tomate', 'D': 'Abacate'},
          'correta': 'B'},

         {'titulo': 'Em qual ano o TikTok atingiu 1 bilhão de usuários?',
          'nivel': 'facil',
          'opcoes': {'A': '2019', 'B': '2021', 'C': '2015', 'D': '2018'},
          'correta': 'B'},
         
         {'titulo': 'Qual destes não é um app com foco em streaming de vídeo?',
          'nivel': 'facil',
          'opcoes': {'A': 'Netflix', 'B': 'Disney Plus', 'C': 'TIDAL', 'D': 'HBO Max'},
          'correta': 'C'},

         {'titulo': 'Qual destes parques não se localiza em São Paulo?!',
          'nivel': 'facil',
          'opcoes': {'A': 'Ibirapuera', 'B': 'Parque do Carmo', 'C': 'Parque Villa Lobos', 'D': 'Morro da Urca'},
          'correta': 'D'},

         {'titulo': 'Qual destas não é uma linguagem de programação?',
          'nivel': 'facil',
          'opcoes': {'A': 'Miratdes', 'B': 'Python', 'C': 'Lua', 'D': 'C++'},
          'correta': 'A'},

         {'titulo': 'Dentre os listados, qual destes esportes é menos praticado no Brasil?',
          'nivel': 'facil',
          'opcoes': {'A': 'Natação', 'B': 'Vôlei', 'C': 'Ski Cross Country', 'D': 'Futebol'},
          'correta': 'C'},
         
         {'titulo': 'Qual o resultado da operação 5 + 2 * 3?',
          'nivel': 'medio',
          'opcoes': {'A': '21', 'B': '11', 'C': '30', 'D': '10'},
          'correta': 'B'},

         {'titulo': 'Qual destas é uma pseudociência que estuda os corpos celestes e as prováveis relações que possuem com a vida das pessoas e os acontecimentos na Terra?',
          'nivel': 'medio',
          'opcoes': {'A': 'Astronomia', 'B': 'Física quântica', 'C': 'Astrologia', 'D': 'Computação'},
          'correta': 'C'},

         {'titulo': 'Qual destas não foi considerada em 2007 uma das sete maravilhas do mundo moderno?',
          'nivel': 'medio',
          'opcoes': {'A': 'Muralha da China', 'B': 'Machu Picchu', 'C': 'Cristo Redentor', 'D': 'Torre Eiffel'},
          'correta': 'D'},

         {'titulo': 'Qual destas pessoas conduziu importantes estudos sobre radioatividade, sendo ganhadora de dois prêmios Nobel?',
          'nivel': 'medio',
          'opcoes': {'A': 'Marie Curie', 'B': 'Paul Erdős', 'C': 'Clive W.J. Granger', 'D': 'Maria Ressa'},
          'correta': 'A'},

         {'titulo': 'Quem é considerada a primeira pessoa programadora do mundo?!',
          'nivel': 'medio',
          'opcoes': {'A': 'Marie Curie', 'B': 'Alan Turing', 'C': 'Ada Lovelace', 'D': 'Edsger Dijkstra'},
          'correta': 'C'},

         {'titulo': 'Qual destes números é primo?',
          'nivel': 'medio',
          'opcoes': {'A': '259', 'B': '85', 'C': '49', 'D': '19'},
          'correta': 'D'},

         {'titulo': 'Na Conjectura de _______, escolhendo-se um número natural inicial n, onde n > 0, os seguintes critérios serão obedecidos: Se n for par o seu sucessor será a metade e se n for ímpar o seu sucessor será o triplo mais um, gerando então um novo número. Qual o nome da conjectura?',
          'nivel': 'medio',
          'opcoes': {'A': 'Collatz', 'B': 'Goldbach', 'C': 'Poincaré', 'D': 'Hodge'},
          'correta': 'A'},

         {'titulo': 'Como faço para chamar o SAMU?',
          'nivel': 'medio',
          'opcoes': {'A': 'Ligue 101', 'B': 'Ligue 192', 'C': 'Ligue 109', 'D': 'Ligue 122'},
          'correta': 'B'},

         {'titulo': 'Qual a segunda pessoa mais seguida no Instagram?',
          'nivel': 'medio',
          'opcoes': {'A': 'Cristiano Ronaldo', 'B': 'Dwayne Johnson', 'C': 'Kim Kardashian', 'D': 'Kylie Jenner'},
          'correta': 'D'},

         {'titulo': 'Qual a pessoa mais seguida no Instagram?',
          'nivel': 'medio',
          'opcoes': {'A': 'Cristiano Ronaldo', 'B': 'Dwayne Johnson', 'C': 'Kim Kardashian', 'D': 'Lionel Messi'},
          'correta': 'A'},

         {'titulo': 'A reprodução dos seres vivos é um processo biológico através do qual os organismos geram descendência. Qual desta não é uma forma de reprodução assexuada?',
          'nivel': 'dificil',
          'opcoes': {'A': 'Autogamia', 'B': 'Esporulação', 'C': 'Partenogênese', 'D': 'Divisão binária'},
          'correta': 'A'},

         {'titulo': 'Qual o resultado da operação 5 + 2 * 3 ^ 2, onde ^ representa potenciação?',
          'nivel': 'dificil',
          'opcoes': {'A': '441', 'B': '86', 'C': 'Nenhuma das outras respostas', 'D': '23'},
          'correta': 'D'},

         {'titulo': 'Quem é Oxóssi?!',
          'nivel': 'dificil',
          'opcoes': {'A': 'Rede de mercados', 'B': 'Tipo de poema Dissílabo', 'C': 'Divindade das religiões africanas', 'D': 'Trapper brasileiro'},
          'correta': 'C'},

         {'titulo': 'Qual a altura do Cristo Redentor?',
          'nivel': 'dificil',
          'opcoes': {'A': 'entre 0 e 20 metros', 'B': 'Entre 21 e 40 metros', 'C': 'Entre 41 e 60 metros', 'D': 'Mais que 60 metros'},
          'correta': 'B'},

         {'titulo': 'Em que ano faleceu Charles Babbage?',
          'nivel': 'dificil',
          'opcoes': {'A': '2022', 'B': '1791', 'C': '1935', 'D': '1871'},
          'correta': 'A'},

         {'titulo': 'Einstein foi Nobel de física em qual ano?',
          'nivel': 'dificil',
          'opcoes': {'A': '1906', 'B': '1905', 'C': '1920', 'D': '1921'},
          'correta': 'D'},

         {'titulo': 'Qual o número atômico do nitrogênio?',
          'nivel': 'dificil',
          'opcoes': {'A': '9', 'B': '7', 'C': '6', 'D': '8'},
          'correta': 'B'},

         {'titulo': 'Qual o ponto de fusão do nitrogênio?',
          'nivel': 'dificil',
          'opcoes': {'A': '120º C', 'B': '15º C', 'C': '-210º C', 'D': '-180º C'},
          'correta': 'C'},
         
         {'titulo': 'Quantos gols Pelé fez oficialmente?',
          'nivel': 'dificil',
          'opcoes': {'A': '815', 'B': '762', 'C': '1100', 'D': '1057'},
          'correta': 'B'},

         {'titulo': 'O que é Necrose?',
          'nivel': 'dificil',
          'opcoes': {'A': 'Uma banda de Rock', 'B': 'Uma marca de luxo', 'C': 'Cidade Francesa', 'D': 'Morte de tecido orgânico'},
          'correta': 'D'}
        ]

def transforma_base(lista):
    dicio_final = {}
    for i in range(len(lista)):
        dificuldade = lista[i]['nivel']
        print(dificuldade)
        if dificuldade in dicio_final.keys():
            if lista[i] not in dicio_final.values():
                dicio_final[dificuldade] += [lista[i]]
        if dificuldade not in dicio_final.keys():
            if lista[i] not in dicio_final.values():
                dicio_final[dificuldade] = [lista[i]]
    return dicio_final

def valida_questao(dicio):
    diciofinal = {}
    dicioletras = {}
    count = 0
    soma = 0
    if 'titulo' not in dicio.keys(): 
        diciofinal['titulo'] = 'nao_encontrado'
    if 'nivel' not in dicio.keys():
        diciofinal['nivel'] = 'nao_encontrado'
    if 'opcoes' not in dicio.keys():
        diciofinal['opcoes'] = 'nao_encontrado'
    if 'correta' not in dicio.keys():
        diciofinal['correta'] = 'nao_encontrado'
    if len(dicio.keys())!= 4:
        diciofinal['outro'] ='numero_chaves_invalido'

    if 'titulo' in dicio.keys():
        tit = dicio['titulo'].strip()
        if len(tit) == 0:
            diciofinal['titulo'] = 'vazio'
    #talvez falte uma questão
    if 'nivel' in dicio.keys():
        if dicio['nivel']== 'facil':
            count+=1
        if dicio['nivel'] == 'medio':
            count+=1
        if dicio['nivel'] == 'dificil':
            count+=1
        if count!= 1:
            diciofinal['nivel'] = 'valor_errado'
    if 'opcoes' in dicio.keys():
        if len(dicio['opcoes']) !=4:
            diciofinal['opcoes'] = 'tamanho_invalido'

        if len(dicio['opcoes']) ==4:
            for letras, alternativas in dicio['opcoes'].items():
                if 'A' in letras:
                    if 'B' in letras:
                        if 'C' in letras:
                            if 'D' in letras:
                                count+=1
                            else:
                                diciofinal['opcoes'] = 'chave_invalida_ou_nao_encontrada'
                x = alternativas.strip()
                if len(x) == 0:
                    dicioletras[letras] = 'vazia'
    for letra, resp in dicioletras.items():
        if '{}' not in letra or '{}' not in resp:
            diciofinal['opcoes'] = dicioletras
    if 'correta' not in dicio.keys():
        diciofinal['correta'] = 'nao_encontrado'
    if 'correta' in dicio.keys():
        if dicio['correta'] == 'A' or dicio['correta'] == 'B' or dicio['correta'] == 'C' or dicio['correta'] == 'D':
            count+=1
        else:
            diciofinal['correta'] = 'valor_errado'
    return diciofinal


def valida_questao(dicio):
    diciofinal = {}
    dicioletras = {}
    count = 0
    soma = 0
    if 'titulo' not in dicio.keys(): 
        diciofinal['titulo'] = 'nao_encontrado'
    if 'nivel' not in dicio.keys():
        diciofinal['nivel'] = 'nao_encontrado'
    if 'opcoes' not in dicio.keys():
        diciofinal['opcoes'] = 'nao_encontrado'
    if 'correta' not in dicio.keys():
        diciofinal['correta'] = 'nao_encontrado'
    if len(dicio.keys())!= 4:
        diciofinal['outro'] ='numero_chaves_invalido'

    if 'titulo' in dicio.keys():
        tit = dicio['titulo'].strip()
        if len(tit) == 0:
            diciofinal['titulo'] = 'vazio'
    #talvez falte uma questão
    if 'nivel' in dicio.keys():
        if dicio['nivel']== 'facil':
            count+=1
        if dicio['nivel'] == 'medio':
            count+=1
        if dicio['nivel'] == 'dificil':
            count+=1
        if count!= 1:
            diciofinal['nivel'] = 'valor_errado'
    if 'opcoes' in dicio.keys():
        if len(dicio['opcoes']) !=4:
            diciofinal['opcoes'] = 'tamanho_invalido'

        if len(dicio['opcoes']) ==4:
            for letras, alternativas in dicio['opcoes'].items():
                if 'A' in letras:
                    if 'B' in letras:
                        if 'C' in letras:
                            if 'D' in letras:
                                count+=1
                            else:
                                diciofinal['opcoes'] = 'chave_invalida_ou_nao_encontrada'
                x = alternativas.strip()
                if len(x) == 0:
                    dicioletras[letras] = 'vazia'
    for letra, resp in dicioletras.items():
        if '{}' not in letra or '{}' not in resp:
            diciofinal['opcoes'] = dicioletras
    if 'correta' not in dicio.keys():
        diciofinal['correta'] = 'nao_encontrado'
    if 'correta' in dicio.keys():
        if dicio['correta'] == 'A' or dicio['correta'] == 'B' or dicio['correta'] == 'C' or dicio['correta'] == 'D':
            count+=1
        else:
            diciofinal['correta'] = 'valor_errado'
    return diciofinal

def valida_questoes(lista):
    listafinal = []
    for i in lista:
        a = valida_questao(i)
        listafinal.append(a)
    return 


import random
def sorteia_questao(dicio, nivel):
    for dificuldade, questoes in dicio.items():
        if dificuldade == nivel:
            return random.choice(questoes)
    
import random
def sorteia_questao_inedida(dicio, nivel, lista):
    for dificuldade, questoes in dicio.items():
        if dificuldade == nivel:
            x = random.choice(questoes)
            if x in lista:
                while x in lista:
                    x = random.choice(questoes)
            if x not in lista:
                lista.append(x)
                return x


def questao_para_texto(dicionario, numero):
    saida = '''

----------------------------------------
QUESTAO {}

{}

RESPOSTAS:
A: {}
B: {}
C: {}
D: {}

'''.format(numero, dicionario['titulo'],dicionario['opcoes']['A'], dicionario['opcoes']['B'], dicionario['opcoes']['C'],  dicionario['opcoes']['D']  )

    return saida





import random 
def gera_ajuda(questao):
    numero = random.randint(1,2)
    alternativas = []
    dica = []
    for alternativa, resposta in questao['opcoes'].items():
        if alternativa != questao['correta']:
            alternativas.append(resposta)
    i = 0 

    while i< numero:
        sorteio = random.choice(alternativas)
        dica.append(sorteio)
        i+=1
    
    print(dica)

    if numero == 1:
        return 'DICA:\nOpções certamente erradas: {} | {}'.format(dica[0],dica[0])
    else:
        return 'DICA:\nOpções certamente erradas: {} | {}'.format(dica[0], dica[1])





questões_são_validas = valida_questoes(quest)
qvalidas = 0
for i in questões_são_validas:
    if i != {}:
        qvalidas += 1
if qvalidas != 0:
    print('Há questões invalidas em sua base de dados, se elas não forem corrigidas o jogo pode funcionar com defeito')
    
base = transforma_base(quest)

nome = input("Qual é o seu nome? ")
print("Olá, {}, O Jogo funcionará da seguinte maneira: Você pode pular 3 vezes e pedir duas ajudas! As opções de reposta são A, B, C ou D. Se quiser pular, digite pular, se quiser parar digite 'parar' e se quiser ajuda digite ajuda".format(nome))
jogar = input('digite "sim" caso queira jogar ')
jogar = jogar.lower()
pulos = 3
ajudas = 2
acertos = 0
teste = "não"
foijogado = "não"
lista_perguntas = []
numero = 0
if jogar == "sim":
    foijogado = "sim"
while jogar == "sim":
    if teste == "sim":
        pulos = 3
        ajudas = 2
        acertos = 0   
        numero = 0
    
    teste = "não"
    estado = "começo"
    premios = [0,1000,5000,10000,30000,50000,100000,300000,500000,1000000]
    respondido = False
    dificuldade = 'facil'
    if acertos > 6:
        dificuldade = 'dificil'
    elif acertos > 3: 
        dificuldade = 'medio'
    else:
        dificuldade = 'facil'
    pergunta = sorteia_questao_inedida(base,dificuldade, lista_perguntas)
    lista_perguntas.append(pergunta)
    resposta = pergunta["correta"].lower()
    numero += 1
    perguntatxt = questao_para_texto(pergunta, numero)
    ajudado = "não"
    jogo = "inacabado"
    while respondido == False:
        print(perguntatxt)
        ação = input("Deseja Escolher entre as alternativas A,B,C e D, pular a pergunta, pedir ajuda, ou parar? ")
        ação = ação.lower()
        valida = False
        while valida == False:
            if ação == "ajuda":
                if ajudas > 0:
                    if ajudado == "não":
                        ajuda = gera_ajuda(pergunta)
                        print(ajuda)
                        valida = True
                        ajudas -=1
                        ajudado = "sim"
                        print("você possui {} ajudas restantes".format(ajudas))
                    else:
                        print('Você ja pediu ajuda para esta questão escolha outra opção')
                        ação = input("Deseja Escolher entre as alternativas A,B,C e D, pular a pergunta, pedir ajuda, ou parar? ")
                        ação - ação.lower()
                        respondido = True
                        valida = False
            elif ação == "pular":
                if pulos > 0:
                    alternativa = "pulo"
                    acertos -= 1
                    valida = True
                    pulos -= 1
                    respondido = True
                else:
                    print("você não possui mais pulos, selecione outra alternativa")
                    valida = False
            elif ação == "parar":
                certeza = input("você tem certeza que deseja parar? ")
                certeza = certeza.lower()
                if certeza == "sim":
                    jogo = "parou"
                    respondido = True
                    valida = True
                    alternativa = "parou"
            elif ação in ["a","b","c","d"]:
                valida = True
                respondido = True
                if ação == resposta:
                    alternativa = "correta"
                    acertos += 1
                else:
                    alternativa = "incorreta"
            else:
                print("por favor insira uma ação valida")
                valida = False
                ação = input("Deseja Escolher entre as alternativas A,B,C e D, pular a pergunta, pedir ajuda, ou parar? ")
                ação = ação.lower()
    if alternativa == "correta":
        print("Você acertou! no momento você possui {}".format(premios[acertos]))
    elif alternativa == "pulo":
        acertos += 1
        print("Você pulou a questão, ainda possui {} pulos restantes".format(pulos))
    elif alternativa == "incorreta":
        jogo = "perdeu"
    if acertos == 9:
        jogo = "ganhou"
    if jogo == "ganhou":
        print("PARABÉNS, VOCÊ GANHOU 1000000!!!!!!!!!")
        estado = "fim"
    elif jogo == "parou":
        print("meus parabens, você parou o jogo tendo {}!".format(premios[acertos]))
        estado = "fim"
    elif jogo == "perdeu":
        print("você perdeu, sinto muito")
        estado = "fim"
    if estado == "fim":
        teste = input("deseja jogar novamente?")
        teste = teste.lower()
        jogar = teste

if foijogado == "sim":
    print("Obrigado por jogar")
else:
    print("Ok, caso mude de ideia é só me rodar novamente!")